<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TasteBuddy — Menu & Ordering Prototype</title>
  <style>
    :root{--bg:#f7f7f9;--card:#ffffff;--accent:#0b76ef;--text:#111;--muted:#666}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);margin:0;line-height:1.35}
    .app{max-width:980px;margin:28px auto;padding:18px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#0bb3ff);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    h1{font-size:20px;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    button, .tab{background:var(--card);border:1px solid #e6e6e9;padding:8px 12px;border-radius:8px;cursor:pointer}
    .tabs{display:flex;gap:8px;margin:18px 0}
    .screen{background:var(--card);padding:16px;border-radius:10px;border:1px solid #e9e9ee}
    ul.menu{list-style:none;margin:0;padding:0;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    li.item{padding:12px;border-radius:8px;border:1px solid #eee;display:flex;flex-direction:column;gap:8px}
    .item h3{margin:0;font-size:16px}
    .meta{font-size:13px;color:var(--muted)}
    .actions{display:flex;gap:8px;align-items:center}
    .qty{display:inline-flex;align-items:center;border-radius:6px;overflow:hidden;border:1px solid #ddd}
    .qty button{width:30px;height:30px;border:0;background:transparent;cursor:pointer}
    .qty span{min-width:34px;text-align:center}
    .add{background:var(--accent);color:#fff;padding:8px 10px;border-radius:8px;border:0}
    aside.panel{margin-top:16px;background:var(--card);padding:12px;border-radius:10px;border:1px solid #e9e9ee}
    .cart{display:flex;flex-direction:column;gap:8px}
    .cart-row{display:flex;justify-content:space-between}
    .access{display:flex;gap:8px;align-items:center}
    .sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}
    .recommend{background:#fbfbff;border:1px dashed #dfe9ff;padding:10px;border-radius:8px}
    .high-contrast{--bg:#0b1720;--card:#05121a;--text:#e6f6ff;--muted:#9fb6c9}
    .large-text{font-size:18px}
    footer{margin-top:18px;font-size:13px;color:var(--muted)}
    .variant-note{font-size:12px;color:#225;}
    /* keyboard focus */
    button:focus, .tab:focus, .add:focus, .qty button:focus{outline:3px solid rgba(11,118,239,0.18)}
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden>TB</div>
        <div>
          <h1>TasteBuddy — Interactive Menu Prototype</h1>
          <div class="meta">Casual fusion bistro • Accessible prototype</div>
        </div>
      </div>
      <div class="controls">
        <div class="access" role="region" aria-label="Accessibility settings">
          <label><input type="checkbox" id="hc"> High contrast</label>
          <label><input type="checkbox" id="lt"> Large text</label>
        </div>
        <button id="toggleVersion" class="tab">Switch Entrée Version</button>
      </div>
    </header>

    <nav class="tabs" role="tablist" aria-label="Menu categories">
      <button class="tab" role="tab" data-screen="entree" aria-controls="entree-screen">Entrée</button>
      <button class="tab" role="tab" data-screen="main" aria-controls="main-screen">Main</button>
      <button class="tab" role="tab" data-screen="dessert" aria-controls="dessert-screen">Dessert</button>
    </nav>

    <main>
      <section id="entree-screen" class="screen" role="region" aria-labelledby="entree-title">
        <h2 id="entree-title">Entrées</h2>
        <p class="variant-note">Version: <span id="versionLabel">A</span></p>
        <ul class="menu" id="entreeList"></ul>
      </section>

      <section id="main-screen" class="screen" role="region" aria-labelledby="main-title" hidden>
        <h2 id="main-title">Mains</h2>
        <ul class="menu" id="mainList"></ul>
      </section>

      <section id="dessert-screen" class="screen" role="region" aria-labelledby="dessert-title" hidden>
        <h2 id="dessert-title">Desserts</h2>
        <ul class="menu" id="dessertList"></ul>
      </section>

      <aside class="panel" aria-label="Order panel">
        <h3>Order summary</h3>
        <div class="cart" id="cart"></div>
        <div class="cart-row"><strong>Total</strong><strong id="total">$0.00</strong></div>
        <div style="margin-top:10px">
          <label><input type="checkbox" id="aiToggle"> Enable AI recommendations</label>
          <div class="recommend" id="recommendBox" hidden>
            <strong>Recommended for you</strong>
            <div id="recList"></div>
          </div>
        </div>
      </aside>

    </main>

    <footer>
      <p>Prototype built for HCD206 Assessment 3 — includes accessibility toggles, two variants for the entrée screen, and a simple AI recommendation mock. Use keyboard to navigate and tab between interactive elements.</p>
    </footer>

  </div>

  <script>
    // Data model
    const data = {
      entreeA: [
        {id:'e1', name:'Crispy Cauliflower Bites', desc:'Smoky aioli, herbs', price:7.5},
        {id:'e2', name:'Vietnamese Spring Roll (2)', desc:'Prawn, mint, nuoc cham', price:9.0},
        {id:'e3', name:'Truffle Fries (v)', desc:'Parmesan, parsley', price:6.5}
      ],
      entreeB: [ // variant B shows photo-first style and slightly different wording
        {id:'e1b', name:'Crispy Cauliflower', desc:'Smoky aioli • shareable', price:7.5},
        {id:'e2b', name:'Spring Rolls — 2 pcs', desc:'Prawn, mint & nuoc cham', price:9.0},
        {id:'e3b', name:'Truffle Shoestring Fries', desc:'Parmesan & parsley', price:6.5}
      ],
      main:[
        {id:'m1', name:'Charred Salmon Bowl', desc:'Brown rice, greens, miso glaze', price:18.0},
        {id:'m2', name:'Chicken Bahn Mi', desc:'Pickles, chilli aioli', price:16.0},
        {id:'m3', name:'Vegan Coconut Curry', desc:'Seasonal veg, jasmine rice', price:15.0}
      ],
      dessert:[
        {id:'d1', name:'Chocolate Lava', desc:'Molten centre, vanilla ice-cream', price:8.5},
        {id:'d2', name:'Mango Sorbet', desc:'Light & refreshing', price:6.0},
        {id:'d3', name:'Affogato', desc:'Espresso & vanilla gelato', price:7.0}
      ]
    };

    // App state
    const state = {screen:'entree', version:'A', cart:{}, aiEnabled:false};

    // Utilities
    function $(s){return document.querySelector(s)}
    function renderMenu(listEl, items){listEl.innerHTML='';items.forEach(it=>{
      const li=document.createElement('li');li.className='item';li.tabIndex=0; li.setAttribute('data-id',it.id);
      li.innerHTML=`<h3>${it.name}</h3><div class="meta">${it.desc}</div><div class="actions"><div class="qty" aria-label="Quantity selector"><button aria-label="decrease">-</button><span aria-live="polite">0</span><button aria-label="increase">+</button></div><button class="add">Add</button></div>`;
      // wire controls
      const plus=li.querySelectorAll('.qty button')[1];
      const minus=li.querySelectorAll('.qty button')[0];
      const qtySpan=li.querySelector('.qty span');
      let qty=0;
      plus.addEventListener('click',()=>{qty++; qtySpan.textContent=qty});
      minus.addEventListener('click',()=>{if(qty>0)qty--; qtySpan.textContent=qty});
      li.querySelector('.add').addEventListener('click',()=>{
        if(qty===0) { alert('Please choose quantity before adding (accessible alert).'); return }
        addToCart(it,qty); qty=0; qtySpan.textContent=0; updateRec();
      });
      listEl.appendChild(li);
    })}

    function addToCart(item,qty){
      if(state.cart[item.id]) state.cart[item.id].qty += qty; else state.cart[item.id]={item,qty};
      renderCart();
    }

    function renderCart(){
      const cartEl=$('#cart'); cartEl.innerHTML=''; let total=0;
      Object.values(state.cart).forEach(row=>{
        const r=document.createElement('div'); r.className='cart-row';
        const name=document.createElement('div'); name.textContent=`${row.item.name} x${row.qty}`;
        const right=document.createElement('div'); right.style.display='flex'; right.style.gap='8px';
        const price=document.createElement('div'); price.textContent=`$${(row.item.price*row.qty).toFixed(2)}`;
        const change=document.createElement('button'); change.textContent='Change'; change.addEventListener('click',()=>openChangeModal(row.item));
        const remove=document.createElement('button'); remove.textContent='Remove'; remove.addEventListener('click',()=>{ delete state.cart[row.item.id]; renderCart(); updateRec(); });
        right.appendChild(price); right.appendChild(change); right.appendChild(remove);
        r.appendChild(name); r.appendChild(right);
        cartEl.appendChild(r);
        total += row.item.price*row.qty;
      })
      $('#total').textContent=`$${total.toFixed(2)}`;
    }

    function openChangeModal(item){
      // simple prompt style (accessible alt: could be a proper dialog)
      const current = state.cart[item.id] ? state.cart[item.id].qty : 0;
      const val = prompt(`Change quantity for ${item.name} (current ${current})`,current);
      if(val!==null){ const n=parseInt(val); if(!isNaN(n) && n>=0){ if(n===0) delete state.cart[item.id]; else state.cart[item.id].qty = n; renderCart(); updateRec(); } }
    }

    // Simple recommendation: suggest items from categories not yet chosen, weighted by price low->high
    function computeRecommendations(){
      const chosen = new Set(Object.values(state.cart).map(r=>r.item.id));
      const pool = [...data.main,...data.dessert,...(state.version==='A'?data.entreeA:data.entreeB)];
      const rec = pool.filter(p=>!chosen.has(p.id)).sort((a,b)=>a.price-b.price).slice(0,3);
      return rec;
    }

    function updateRec(){
      if(!state.aiEnabled) return;
      const recBox=$('#recommendBox'); const list=$('#recList'); list.innerHTML=''; const recs=computeRecommendations();
      recs.forEach(r=>{ const d=document.createElement('div'); d.innerHTML=`<div style="display:flex;justify-content:space-between"><div>${r.name}</div><div>$${r.price.toFixed(2)}</div></div>`; list.appendChild(d) });
      recBox.hidden = recs.length===0;
    }

    // Renderers for three lists
    function renderAll(){
      const entreeList = $('#entreeList');
      renderMenu(entreeList, state.version==='A'?data.entreeA:data.entreeB);
      renderMenu($('#mainList'), data.main);
      renderMenu($('#dessertList'), data.dessert);
      renderCart(); updateRec();
      document.querySelectorAll('.tabs .tab').forEach(t=>t.classList.toggle('active', t.getAttribute('data-screen')===state.screen));
      document.querySelectorAll('[role="region"]').forEach(sec=>{ if(sec.id===state.screen+'-screen') sec.hidden=false; else if(sec.id.endsWith('-screen')) sec.hidden=true });
      $('#versionLabel').textContent = state.version;
    }

    // Event wiring
    document.querySelectorAll('.tabs .tab').forEach(btn=>btn.addEventListener('click',()=>{ state.screen = btn.getAttribute('data-screen'); renderAll(); btn.focus(); }));
    $('#toggleVersion').addEventListener('click',()=>{ state.version = state.version==='A'?'B':'A'; renderAll(); });
    $('#hc').addEventListener('change',(e)=>{ document.body.classList.toggle('high-contrast', e.target.checked) });
    $('#lt').addEventListener('change',(e)=>{ document.body.classList.toggle('large-text', e.target.checked) });
    $('#aiToggle').addEventListener('change',(e)=>{ state.aiEnabled = e.target.checked; $('#recommendBox').hidden = !e.target.checked; if(e.target.checked) updateRec(); });

    // keyboard: allow Enter on items to add 1
    document.addEventListener('keydown', (e)=>{
      if(e.key==='Enter'){ const active=document.activeElement; if(active && active.classList.contains('item')){ const id=active.getAttribute('data-id'); // find item
          const pool = [...data.entreeA, ...data.entreeB, ...data.main, ...data.dessert]; const it = pool.find(p=>p.id===id);
          if(it) addToCart(it,1);
      }}
    });

    // Initialization
    renderAll();

    // Notes about accessibility and design decisions: (visible for instructor via console)
    console.info('Accessibility: items have keyboard focus, ARIA regions used, large-text & high-contrast toggles implemented. Version toggle shows two visual approaches for Entrée screen as required for submission.');
  </script>
</body>
</html>
